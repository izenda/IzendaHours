@using Microsoft.AspNet.Identity
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Izenda Engineering</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <link rel="stylesheet" type="text/css" href="~/Content/Custom.css">
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    
    <link rel="shortcut icon" href="~/favicon.ico">

    <meta name="description" content="A timesheet application for the Izenda Engineering team" />
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                @*<div class="container-fluid">
                        <div class="navbar-header">
                            <a class="navbar-brand" href="#">
                                <img alt="Brand" class="img-responsive" src="~/Resources/IzendaNewLogoBlue.png">
                            </a>
                        </div>
                    </div>*@
                @if (User.Identity.IsAuthenticated)
                {
                    @Html.ActionLink("Izenda Hours Sheet", "Welcome", "Records", new { area = "" }, new { @class = "navbar-brand" })
                }
                else { 
                @Html.ActionLink("Izenda Hours Sheet", "Index", "Records", new { area = "" }, new { @class = "navbar-brand" })
                }
            </div>
            <div class="navbar-collapse collapse">
                @if (User.Identity.IsAuthenticated)
                {
                    <ul class="nav navbar-nav">
                        <li>@Html.ActionLink("Timesheet", "Index", "Records")</li>
                        <li>@Html.ActionLink("Record", "Create", "Records")</li>
                        <li>@Html.ActionLink("Reporting", "ReportList", "Reporting")</li>
                    </ul>
                }
                @Html.Partial("_LoginPartial")
            </div>
        </div>
    </div>
    <div class="container body-content">
        @RenderBody()
        <hr />
        <footer>
            <p>&copy; @DateTime.Now.Year - Izenda, Inc.</p>
        </footer>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <!-- DataTables CSS -->
    @*<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.5/css/jquery.dataTables.css">*@
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/plug-ins/1.10.6/integration/bootstrap/3/dataTables.bootstrap.css">

    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.5/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/plug-ins/1.10.6/integration/bootstrap/3/dataTables.bootstrap.js"></script>
    <script type="text/javascript" charset="utf-8" src="//cdn.datatables.net/plug-ins/1.10.6/api/sum().js"></script>
    <script type="text/javascript" src="~/Scripts/jquery.dataTables.columnFilter.js"></script>
    

    <script type="text/javascript">
        $("#timeTable").each( function () {
            $(this).dataTable({
                "aaSorting": [[0, 'desc']],
                "stateSave": true,
                "stateDuration": -1,
                "footerCallback": function (row, data, start, end, display) {
                    var api = this.api(), data;

                    // Remove the formatting to get integer data for summation
                    var intVal = function (i) {
                        return typeof i === 'string' ?
                            i.replace(/[\$,]/g, '') * 1 :
                            typeof i === 'number' ?
                            i : 0;
                    };

                    // Total over all pages
                    total = api
                        .column(4)
                        .data()
                        .reduce(function (a, b) {
                            return intVal(a) + intVal(b);
                        });

                    // Total over this page
                    pageTotal = api
                        .column(4, { page: 'current' })
                        .data()
                        .reduce(function (a, b) {
                            return intVal(a) + intVal(b);
                        }, 0);

                    // Update footer
                    $(api.column(4).footer()).html(
                        pageTotal + ' hours'
                    );
                }
            })
            .columnFilter({
                //sPlaceHolder: "head:before",
                "bLengthChange": true,
                "sDom": "lrtip",
                "bAutoWidth": true, "sScrollY": "400px", "bPaginate": true, "bUseColVis": true, "bScrollCollapse": true, aoColumns: [{
                    type: "date-range"
                    
                },
                            {
                                type: "select"
                              
                            },
                            {
                                type: "select"

                            }
                ]

            });

        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#projectTable').DataTable();
        });
    </script>
    <script type="text/javascript">
    var jumboHeight = $('.jumbotron').outerHeight();
    function parallax() {
        var scrolled = $(window).scrollTop();
        $('.bg').css('height', (jumboHeight - scrolled) + 'px');
    }

    $(window).scroll(function (e) {
        parallax();
    });
    </script>
</body>
</html>
